
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>LED ESP32 Control</title>
</head>
<body>
  <h2>ESP32 LED Control via Firebase</h2>
  <p>Current LED state: <span id="state">-</span></p>
  <button id="on">Turn ON</button>
  <button id="off">Turn OFF</button>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
    import { getDatabase, ref, onValue, set } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCzWL-ubcBWJlBtooGPDeMFyzK9q8t-sro",
      authDomain: "led-esp32-137db.firebaseapp.com",
      databaseURL: "https://led-esp32-137db-default-rtdb.asia-southeast1.firebasedatabase.app/",
      projectId: "led-esp32-137db"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    const ledRef = ref(db, 'led');

    const stateEl = document.getElementById('state');
    const onBtn = document.getElementById('on');
    const offBtn = document.getElementById('off');

    // Listen to changes in Firebase
    onValue(ledRef, (snapshot) => {
      const v = snapshot.val();
      stateEl.textContent = String(v);
    });

    // Buttons to update Firebase
    onBtn.addEventListener('click', () => set(ledRef, 1));
    offBtn.addEventListener('click', () => set(ledRef, 0));
  </script>
</body>
</html>
